@using Steps.Client.Features.Common
@using Steps.Shared.Contracts.Athletes.ViewModels

@inherits ManageBaseComponent<Athlete, AthleteViewModel, CreateAthleteViewModel,UpdateAthleteViewModel>


<RadzenCard>
    <RadzenDataGrid TItem="AthleteViewModel" Data="Manager.Data" AllowPaging="true"
                    PageSize="Manager.PageSize" EmptyText="Участников в клубе еще нет"
                    IsLoading="@Manager.IsLoading" Count="@Manager.TotalCount"
                    LoadData="@OnChangePage"
                    SelectionMode="DataGridSelectionMode.Single"
                    RowSelect="@(e => DialogManager.ShowCardDialog(e))">

        <HeaderTemplate>
            <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="add_circle" Text="Добавить участника"
                          Click="@OnCreateByTeam"/>
        </HeaderTemplate>

        <Columns>
            <RadzenDataGridColumn TItem="AthleteViewModel" Property="@nameof(AthleteViewModel.FullName)" Title="ФИО"/>
            <RadzenDataGridColumn TItem="AthleteViewModel" Property="@nameof(AthleteViewModel.BirthDate)" Title="Дата рождения"/>

            <RadzenDataGridColumn Width="16%" Context="c" Filterable="false" Sortable="false"
                                  TextAlign="TextAlign.Right" Frozen="true" FrozenPosition="FrozenColumnPosition.Right">
                <Template Context="c">
                    <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat"
                                  Size="ButtonSize.Medium" class="rz-my-1 rz-ms-1"
                                  Click="@(() => OnUpdate(c))" @onclick:stopPropagation="true"/>

                    <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Danger" Variant="Variant.Flat"
                                  Size="ButtonSize.Medium" Shade="Shade.Lighter" class="rz-my-1 rz-ms-1"
                                  Click="@(() => OnDelete(c))" @onclick:stopPropagation="true"/>
                </Template>
            </RadzenDataGridColumn>

        </Columns>
    </RadzenDataGrid>
</RadzenCard>
