@page "/entries"

@using Steps.Shared.Contracts.Entries.ViewModels
@inherits Steps.Client.Features.Common.ManageBaseComponent<Entry, Steps.Shared.Contracts.Entries.ViewModels.EntryViewModel, Steps.Shared.Contracts.Entries.ViewModels.CreateEntryViewModel, Steps.Shared.Contracts.Entries.ViewModels.UpdateEntryViewModel>

<RadzenCard>
    <RadzenTabs>
        <Tabs>
            <RadzenTabsItem Text="Принятые">
                <RadzenDataGrid TItem="EntryViewModel" Data="@AcceptedEntries"
                                AllowPaging="true"
                                PageSize="Manager.PageSize"
                                EmptyText="Нет принятых заявок"
                                IsLoading="@Manager.IsLoading"
                                RowSelect="@(e => DialogManager.ShowCardDialog(e))">
                    <Columns>
                        <RadzenDataGridColumn TItem="EntryViewModel" Property="Number" Title="Номер" />
                        <RadzenDataGridColumn TItem="EntryViewModel" Property="ContestName" Title="Мероприятие" />
                        @if (!IsReadonly)
                        {
                            <RadzenDataGridColumn Width="16%" Filterable="false" Sortable="false" TextAlign="TextAlign.Right">
                                <Template Context="c">
                                    <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat"
                                                  Size="ButtonSize.Medium"
                                                  Click="@(() => OnUpdate(c))" @onclick:stopPropagation="true" />
                                    <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Danger" Variant="Variant.Flat"
                                                  Size="ButtonSize.Medium" Shade="Shade.Lighter"
                                                  Click="@(() => OnDelete(c))" @onclick:stopPropagation="true" />
                                </Template>
                            </RadzenDataGridColumn>
                        }
                    </Columns>
                </RadzenDataGrid>
            </RadzenTabsItem>

            <RadzenTabsItem Text="Непринятые">
                <RadzenDataGrid TItem="EntryViewModel" Data="@RejectedEntries"
                                AllowPaging="true"
                                PageSize="Manager.PageSize"
                                EmptyText="Нет непринятых заявок"
                                IsLoading="@Manager.IsLoading"
                                RowSelect="@(e => OnEntrySelected(e))">
                    <Columns>
                        <RadzenDataGridColumn TItem="EntryViewModel" Property="Number" Title="Номер" />
                        <RadzenDataGridColumn TItem="EntryViewModel" Property="ContestName" Title="Мероприятие" />
                        @if (!IsReadonly)
                        {
                            <RadzenDataGridColumn Width="16%" Filterable="false" Sortable="false" TextAlign="TextAlign.Right">
                                <Template Context="c">
                                    <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat"
                                                  Size="ButtonSize.Medium"
                                                  Click="@(() => OnUpdate(c))" @onclick:stopPropagation="true" />
                                    <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Danger" Variant="Variant.Flat"
                                                  Size="ButtonSize.Medium" Shade="Shade.Lighter"
                                                  Click="@(() => OnDelete(c))" @onclick:stopPropagation="true" />
                                </Template>
                            </RadzenDataGridColumn>
                        }
                    </Columns>
                </RadzenDataGrid>
            </RadzenTabsItem>
        </Tabs>
    </RadzenTabs>
</RadzenCard>