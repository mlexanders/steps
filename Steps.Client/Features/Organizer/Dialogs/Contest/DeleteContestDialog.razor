@using Steps.Client.Features.Organizer.Services
@using Steps.Shared.Contracts.Contests.ViewModels
@using Steps.Client.Features.Organizer.Components
@using Steps.Client.Features.Organizer.Services.Contest

@inherits BaseModal
@inject ContestManager ContestManager

<RadzenTemplateForm TItem="ContestViewModel" Submit="Create">

    <RadzenText Text="Вы уверены, что хотите удалить это мероприятие?"/>

    <ContestCard Contest="@Contest"/>

    <RadzenButton Text="Да, удалить" Icon="save" Click="Create" ButtonStyle="ButtonStyle.Danger"/>
    <RadzenButton Text="Отмена" Icon="cancel" Click="() => Close()" ButtonStyle="ButtonStyle.Primary"
                  Style="margin-left: 10px;"/>
</RadzenTemplateForm>

@code {
    [Parameter] public ContestViewModel Contest { get; set; } = null!;

    private async Task Create()
    {
        var result = await ContestManager.Delete(Contest);

        ShowResultMessage(result);

        if (result.IsSuccess) Close(true);
    }

}